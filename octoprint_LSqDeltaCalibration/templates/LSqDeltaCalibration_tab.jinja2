<form id="tab_plugin_LSqDeltaCalibration" class="form-horizontal">
  <ul class="nav nav-pills">
    <li class="active">
      <a href="#calibrate_tab" data-toggle="tab">{{ _('Calibrate') }}</a>
    </li>
    <li>
      <a href="#current_geometry_tab" data-toggle="tab">{{ _('Current Geometry') }}</a>
    </li>
    <li>
      <a href="#settings_tab" data-toggle="tab">{{ _('Settings') }}</a>
    </li>
  </ul>

  <div class="tab-content">
    <div id="current_geometry_tab" class="tab-pane">
      <div data-bind="visible: !isPrinterReady()" class="message warning">
        {{ _('Please connect your printer to get its capabilities') }}
      </div>
        <fieldset>
            <div class="control-group">
                <label class="control-label">{{ _('Steps per unit') }} (X,Y,Z):</label>
                <div class="input-append">
                    <input type="number" data-bind="value: geometry().StepsPerUnit[0]" step="0.1" class="input-small"/>
                    <input type="number" data-bind="value: geometry().StepsPerUnit[1]" step="0.1" class="input-small"/>
                    <input type="number" data-bind="value: geometry().StepsPerUnit[2]" step="0.1" class="input-small"/>
                    <span class="add-on">steps</span>
                </div>
            </div>
            <div class="control-group">
                <label class="control-label">{{ _('Endstop Offset') }} (X,Y,Z):</label>
                <div class="input-append">
                    <input type="number" data-bind="value: geometry().EndStopOffset[0]" step="0.1" class="input-small"/>
                    <input type="number" data-bind="value: geometry().EndStopOffset[1]" step="0.1" class="input-small"/>
                    <input type="number" data-bind="value: geometry().EndStopOffset[2]" step="0.1" class="input-small"/>
                    <span class="add-on">mm</span>
                </div>
            </div>
            <div class="control-group">
                <label class="control-label">{{ _('Tower Offset') }} (X,Y,Z):</label>
                <div class="input-append">
                    <input type="number" data-bind="value: geometry().TowerOffset[0]" step="0.1" class="input-small"/>
                    <input type="number" data-bind="value: geometry().TowerOffset[1]" step="0.1" class="input-small"/>
                    <input type="number" data-bind="value: geometry().TowerOffset[2]" step="0.1" class="input-small"/>
                    <span class="add-on">deg</span>
                </div>
            </div>
            <div class="control-group">
                <label class="control-label">{{ _('Rod Length') }} :</label>
                <div class="input-append">
                    <input type="number" data-bind="value: geometry().RodLength" step="0.1" class="input-small"/>
                    <span class="add-on">mm</span>
                </div>
            </div>
            <div class="control-group">
                <label class="control-label">{{ _('Rod Adjust') }} (X,Y,Z):</label>
                <div class="input-append">
                    <input type="number" data-bind="value: geometry().RodLengthAdjust[0]" step="0.1" class="input-small"/>
                    <input type="number" data-bind="value: geometry().RodLengthAdjust[1]" step="0.1" class="input-small"/>
                    <input type="number" data-bind="value: geometry().RodLengthAdjust[2]" step="0.1" class="input-small"/>
                    <span class="add-on">mm</span>
                </div>
            </div>
            <div class="control-group">
                <label class="control-label">{{ _('Delta Radius') }} :</label>
                <div class="input-append">
                    <input type="number" data-bind="value: geometry().DeltaRadius" step="0.1" class="input-small"/>
                    <span class="add-on">mm</span>
                </div>
            </div>
            <div class="control-group">
                <label class="control-label">{{ _('Radius Adjust') }} (X,Y,Z):</label>
                <div class="input-append">
                    <input type="number" data-bind="value: geometry().DeltaRadiusAdjust[0]" step="0.1" class="input-small"/>
                    <input type="number" data-bind="value: geometry().DeltaRadiusAdjust[1]" step="0.1" class="input-small"/>
                    <input type="number" data-bind="value: geometry().DeltaRadiusAdjust[2]" step="0.1" class="input-small"/>
                    <span class="add-on">mm</span>
                </div>
            </div>
            <div class="control-group">
                <label class="control-label">{{ _('Max Height') }} :</label>
                <div class="input-append">
                    <input type="number" data-bind="value: geometry().MaxHeight" step="0.1" class="input-small"/>
                    <span class="add-on">mm</span>
                </div>
            </div>
            <div class="control-group">
                <div class="input-append">
                    <button class="btn btn-primary" data-bind="click: fetchGeometry">{{ _('Fetch Geometry') }}</button>
                    <button class="btn btn-primary" data-bind="click: probeBed">{{ _('Probe bed') }}</button>
                    <button class="btn btn-primary" data-bind="click: computeCorrections">{{ _('Compute') }}</button>
                </div>
            </div>
        </fieldset>
    </div>

    <div id="settings_tab" class="tab-pane">

                    <div class="control-group">
                <label class="control-label">{{ _('Probing Radius') }} :</label>
                <div class="input-append">
                    <input type="number" data-bind="value: probeRadius" step="1" class="input-small"/>
                </div>
            </div>
            <div class="control-group">
                <label class="control-label">{{ _('Probe points') }} :</label>
                <div class="input-append">
                    <input type="number" data-bind="value: probePointCount" step="1" class="input-small"/>
                </div>
            </div>

    
    </div>

    <div id="calibrate_tab" class="tab-pane active">

            <div class="control-group">
                <div class="input-append">
                    <button class="btn btn-primary" data-bind="click: fetchGeometry">{{ _('Fetch Geometry') }}</button>
                    <button class="btn btn-primary" data-bind="click: probeBed">{{ _('Probe bed') }}</button>
                    <button class="btn btn-primary" data-bind="click: computeCorrections">{{ _('Compute') }}</button>
                </div>
            </div>

      <h4>{{ _('Plot') }}</h4>
                    <div class="row-fluid" id="surfacePlotDiv" style="
                                    border-style: solid;
                                    border-width: 2px;
                                    border-color: red;
                                    width: 100%;
                                    height: 400px;">
            </div>

            <div class="row-fluid">
                <div class="span3">
                    {{ _('Probed RMS') }}:
                </div>
                <div class="span2" data-bind="text: ProbedRMS"></div>
                <div class="span3">
                    {{ _('Calibrated RMS') }}:
                </div>
                <div class="span2" data-bind="text: CalibratedRMS"></div>
            </div>

      <h4>
        <a href="#collapseCalibration" class="fa fa-caret-right" data-toggle="collapse" role="button"
                 data-bind="" aria-expanded ="false">
          <i class="fa fa-chevron-right pull-right" data-bind="visible: $($element.parentElement).hasClass('collapsed')"></i>
          <i class="fa fa-chevron-down"></i>
        </a> {{ _('Calibration factors') }}</h4>
      <div class="row-fluid collapse" id="collapseCalibration">
        <div class="row-fluid">
          <div class="span3">
            <H5>Parameter</H5>
          </div>
          <div class="input-append span6">
            <H5>Value</H5>
          </div>
          <div class="input-append span1">
            <H5>Calibrate</H5>
          </div>
        </div>

        <div class="row-fluid">
          <div class="span3">{{ _('Steps per unit') }}</div>
          <div class="span2" data-bind="text: newGeometry().StepsPerUnit[0].toFixed(4)"></div>
          <div class="span2" data-bind="text: newGeometry().StepsPerUnit[1].toFixed(4)"></div>
          <div class="span2" data-bind="text: newGeometry().StepsPerUnit[2].toFixed(4)"></div>
          <div class="input-append span1">
            <input type="checkbox" data-bind="checked: calibrate.StepsPerUnit" title="{{ _('Calibrate') }}" />
          </div>
        </div>

        <div class="row-fluid">
          <div class="span3">{{ _('Tower Offset') }}</div>
          <div class="span2" data-bind="text: newGeometry().TowerOffset[0].toFixed(4)"></div>
          <div class="span2" data-bind="text: newGeometry().TowerOffset[1].toFixed(4)"></div>
          <div class="span2" data-bind="text: newGeometry().TowerOffset[2].toFixed(4)"></div>
          <div class="input-append span1">
            <input type="checkbox" data-bind="checked: calibrate.TowerOffset" title="{{ _('Calibrate') }}" />
          </div>
        </div>

        <div class="row-fluid">
          <div class="span3">{{ _('Max Height') }}</div>
          <div class="span6" data-bind="text: newGeometry().Height.toFixed(4)"></div>
          <div class="input-append span1">
            <input type="checkbox" data-bind="checked: calibrate.MaxHeight" title="{{ _('Calibrate') }}" />
          </div>
        </div>

        <div class="row-fluid">
          <div class="span3">{{ _('Endstop Offset') }}</div>
          <div class="span2" data-bind="text: newGeometry().EndStopOffset[0].toFixed(4)"></div>
          <div class="span2" data-bind="text: newGeometry().EndStopOffset[1].toFixed(4)"></div>
          <div class="span2" data-bind="text: newGeometry().EndStopOffset[2].toFixed(4)"></div>
          <div class="input-append span1">
            <input type="checkbox" data-bind="checked: calibrate.EndStopOffset" title="{{ _('Calibrate') }}" />
          </div>
        </div>

        <div class="row-fluid">
          <div class="span3">{{ _('Rod Length') }}</div>
          <div class="span6" data-bind="text: newGeometry().DiagonalRod.toFixed(4)"></div>
          <div class="input-append span1">
            <input type="checkbox" data-bind="checked: calibrate.RodLength" title="{{ _('Calibrate') }}" />
          </div>
        </div>

        <div class="row-fluid">
          <div class="span3">{{ _('Rod Length Adjust') }}</div>
          <div class="span2" data-bind="text: newGeometry().DiagnoalRodAdjust[0].toFixed(4)"></div>
          <div class="span2" data-bind="text: newGeometry().DiagnoalRodAdjust[1].toFixed(4)"></div>
          <div class="span2" data-bind="text: newGeometry().DiagnoalRodAdjust[2].toFixed(4)"></div>
          <div class="input-append span1">
            <input type="checkbox" data-bind="checked: calibrate.RodLenghtAdjust" title="{{ _('Calibrate') }}" />
          </div>
        </div>

        <div class="row-fluid">
          <div class="span3">{{ _('Delta Radius') }}</div>
          <div class="span6" data-bind="text: newGeometry().Radius.toFixed(4)"></div>
          <div class="input-append span1">
            <input type="checkbox" data-bind="checked: calibrate.DeltaRadius" title="{{ _('Calibrate') }}" />
          </div>
        </div>

        <div class="row-fluid">
          <div class="span3">{{ _('Delta Radius Adjust') }}</div>
          <div class="span2" data-bind="text: newGeometry().RadiusAdjust[0].toFixed(4)"></div>
          <div class="span2" data-bind="text: newGeometry().RadiusAdjust[1].toFixed(4)"></div>
          <div class="span2" data-bind="text: newGeometry().RadiusAdjust[2].toFixed(4)"></div>
          <div class="input-append span1">
            <input type="checkbox" data-bind="checked: calibrate.DeltaRadiusAdjust" title="{{ _('Calibrate') }}" />
          </div>
        </div>
      </div>

            <div class="control-group">
                <span data-bind="text: logText"/>
            </div>

      <div class="row-fluid">
        <h4>{{ _('Probed Geometries') }}</h4>

        <table class="table table-striped table-hover table-condensed table-hover" id="settings_deltaCalibration_probedGeometries" data-bind="bvisible: printerProfiles.profiles.items().length > 0" style="bdisplay: none">
          <thead>
            <tr>
              <th class="settings_deltaCalibration_probedGeometries_name">{{ _('Name') }}</th>
              <th class="settings_deltaCalibration_probedGeometries_timestamp">{{ _('Timestamp') }}</th>
              <th class="settings_deltaCalibration_probedGeometries_RMS span2" >{{ _('RMS') }}</th>
              <th class="settings_deltaCalibration_probedGeometries_action span2">{{ _('Action') }}</th>
            </tr>
          </thead>
          <tbody data-bind="foreach: probedGeometries">
            <tr data-bind="attr: {title: name}">
<!--              <td class="settings_printerProfiles_profiles_name">
                <span class="fa fa-star" data-bind="dinvisible: !isdefault()"></span>
                <span data-bind="text: name, style: { 'font-weight': iscurrent() ? 'bold' : 'normal' }"></span>
              </td>-->
              <td class="settings_deltaCalibration_probedGeometries_name" data-bind="text: Name"></td>
              <td class="settings_deltaCalibration_probedGeometries_timestamp" data-bind="text: Timestamp"></td>
              <td class="settings_deltaCalibration_probedGeometries_RMS" data-bind="text: RMS"></td>
              <td class="settings_deltaCalibration_probedGeometries_action">
                <a href="#" class="fa fa-download" title="{{ _('Set as default profile') }}"
                   data-bind="click: function() { $root.LoadGeometry($data) }"></a>
                &nbsp;|&nbsp;
                <a href="#" class="fa fa-trash-o" title="{{ _('Delete Profile') }}" data-bind="click: function() {$root.probedGeometries.remove($data); }"></a>
              </td>
            </tr>
          </tbody>
        </table>



      </div>




      </div>
</div>
</form>
  <!--
    <div class="input-append">
    <input type="text" class="input-xxlarge" data-bind="value: newUrl"/>
    <button class="btn btn-primary" data-bind="click: goToUrl">{{ _('Go') }}</button>
  </div>-->

